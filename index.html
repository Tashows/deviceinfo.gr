<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1" />
        <title>DeviceInfo.gr | Πληροφορίες συσκευής</title>
        <style>
            body {font-family:Helvetica, Arial, sans-serif;line-height:130%;margin:0;padding:0;background:#fafafa;border-top:3px solid #7952b3;}
            p {padding:5px 0;margin:0;font-size:0.88rem;}
            ul {list-style:none;padding:5px 0;margin:0;}
            ul li {padding:5px 0;margin:0;}
            h1, h2, h3, h4 {line-height:120%;padding:5px 0;margin:0;}
            h1 {background:url(./assets/svg/laptop.svg) no-repeat 0 50%;background-size:30px 30px;line-height:1;padding:0 0 0 45px;margin-bottom:15px;}
            h2 {padding:0 0 5px;margin:0 0 10px;border-bottom:2px solid #dadada;line-height:120%;}
            h3 {font-size:0.94rem;font-weight:normal;}
            button {background:#7952b3;color:#fff;padding:5px 15px;border-radius:5px;border:0;font-size:0.9rem;line-height:120%;}

            .container {max-width:1200px;padding:0 15px;margin:0 auto;}
                header {margin:0;padding:15px;text-align:right;}
                    header a {display:inline-block;}
                main {display:grid;grid-template-columns:1fr 3fr;grid-gap:15px;margin:0 0 15px;}
                    .about {display:grid;grid-template-columns:1fr;grid-template-rows:auto auto 100%;grid-gap:15px;align-items:start;padding:15px;}
                        .about .info p {font-size:0.8rem;color:#606060;}
                        .about .copy,
                        .about .share {padding:15px 0;display:grid;grid-template-columns:1fr;grid-gap:5px;align-items:center;border-top:2px solid #dadada;}
                    .details {background:#fff;padding:15px;border-radius:10px;}
                        #device {margin-bottom:15px;}

            @media only screen and (max-width:768px) {
                h1 {background:url(./assets/svg/phone.svg) no-repeat 0 50%;background-size:contain;}
                h2 {font-size:1.4rem;}
                header {padding:15px 15px 5px;}
                main {grid-template-columns:1fr;}
                    .about {grid-template-rows:auto auto auto;grid-gap:0;}
                        .about .copy p,
                        .about .share p {padding:0;}
            }
        </style>
    </head>
    <body>
        <div class="container">
            <header>
                <a href="./en/">English</a>
            </header>
            <main>
                <div class="about">
                    <div class="info">
                        <h1>DeviceInfo.gr</h1>
                        <p>Μοιραστείτε εύκολα &amp; ανώνυμα τις πληροφορίες της συσκευής σας με web developers και designers. Αυτές οι πληροφορίες μπορούν να χρησιμοποιηθούν για τη βελτίωση ιστοσελίδων και web εφαρμογών που επισκέπτεστε συχνά. Η διεύθυνση IP της συσκευής δεν μοιράζεται ποτέ.</p>
                    </div>
                    <div class="copy">
                        <p>Αντιγράψτε τις πληροφορίες της συσκευής σας σε απλό κείμενο (π.χ. για χρήση σε email)</p>
                        <div>
                            <button>ΑΝΤΙΓΡΑΦΗ ΠΛΗΡΟΦΟΡΙΩΝ</button>
                        </div>
                    </div>
                    <div class="share">
                        <p>Μοιραστείτε με τρίτους τις πληροφορίες της συσκευής σας σε ένα σύνδεσμο (URL)</p>
                        <div>
                            <button>ΑΝΤΙΓΡΑΦΗ ΣΥΝΔΕΣΜΟΥ</button>
                        </div>
                    </div>
                </div>
                <div class="details">
                    <h2>Συσκευή</h2>
                    <div id="device"></div>
                    <h2>Διεύθυνση IP &amp; Τοποθεσία</h2>
                    <div id="iplocation"></div>
                </div>
            </main>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/ua-parser-js@1.0.2/src/ua-parser.min.js"></script>
        <script>
            /* To Do:
                - Add self-hosted web fonts (?), favicon & some SVG icons for visual brevity
                - Provide a GitHub URL for feedback - no direct visible credits
                - Basic analytics only
                - Provide in Greek & English - auto switch language perhaps based on visitor's browser language
                - Allow copying data (to paste in email - so format accordingly & add link back to deviceinfo.gr to spread the word)
                - Create URL for sharing which uses the current UA as URL param - if the UA exists as URL param, decode it (also display in <input> to manually copy)
                - Consider screenshot with canvas? https://serversideup.net/capturing-an-image-from-an-html5-canvas-or-video-element/
            */

            // Get current date & time (as timestamp)
            var d = new Date();
            var month = ((d.getMonth() + 1) < 10 ? '0' + (d.getMonth() + 1) : (d.getMonth() + 1));
            var timestamp = d.getFullYear() + '' + month + '' + d.getDate() + '' + d.getHours() + '' + d.getMinutes() + '' + d.getSeconds();

            // Device
            var parser = new UAParser();
            var result = parser.getResult();
            var deviceDetails = {
                'Όνομα Browser': result.browser.name,
                'Έκδοση Browser': result.browser.version,
                'Λειτουργικό Σύστημα': result.os.name,
                'Έκδοση Λειτουργικού Συστ/τος': result.os.version,
                'Διαστάσεις Οθόνης': window.screen.width + ' x ' + window.screen.height,
                'Διαστάσεις Browser': window.innerWidth + ' x ' + window.innerHeight,
                'Κωδικοποιημένες Πληροφορίες Browser': result.ua
            }
            let devContainer = document.getElementById('device');
            let devProps = [];
            for (var key in deviceDetails) {
                devProps.push('<li>' + key + ': <b>' + deviceDetails[key] + '</b></li>');
            }
            devContainer.innerHTML = '<ul>' + devProps.join('') + '</ul>';

            // IP - Location
            let ipLocContainer = document.getElementById('iplocation');
            let ipLocProps = [];
            fetch('https://ipv4.myip.wtf/json').then(response => response.json()).then(function(data) {
                var location = data.YourFuckingLocation.split(',');
                ipLocProps.push('<li>Διεύθυνση IP</span>: <b>' + data.YourFuckingIPAddress + '</b></li>');
                ipLocProps.push('<li>Πάροχος: <b>' + data.YourFuckingISP + '</b></li>');
                ipLocProps.push('<li>Τοποθεσία: <b>' + location[0] + ', ' + data.YourFuckingCountryCode + '</b></li>');
                ipLocContainer.innerHTML = '<ul>' + ipLocProps.join('') + '</ul>';
            });
        </script>
    </body>
</html>